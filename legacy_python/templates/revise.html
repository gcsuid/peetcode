{% extends "base.html" %}

{% block content %}
<div class="card">
    <h2>Revision Result: {{ problem.title }}</h2>
    <p>
        <span class="difficulty-{{ problem.difficulty }}">{{ problem.difficulty }}</span>
        <span class="tag">{{ problem.tags }}</span>
    </p>

    <div
        style="background: #e8f4fd; padding: 15px; border-radius: 4px; border-left: 5px solid #007bff; margin-bottom: 20px;">
        <h3>AI Feedback</h3>
        <p><strong>Memory Rating:</strong>
            <span
                style="font-weight: bold; color: {% if attempt.ai_memory_rating == 'REMEMBERED' %}green{% elif attempt.ai_memory_rating == 'PARTIAL' %}orange{% else %}red{% endif %};">
                {{ attempt.ai_memory_rating }}
            </span>
        </p>
        <p><strong>Summary:</strong> {{ attempt.ai_feedback_summary }}</p>
        <p><strong>Next Review:</strong> {{ problem.schedule.next_review_date }} (Interval: {{
            problem.schedule.current_interval_days }} days)</p>
    </div>

    <div style="display: flex; gap: 20px;">
        <div style="flex: 1;">
            <h3>Original Attempt</h3>
            <div style="background: #f9f9f9; padding: 10px; border-radius: 4px;">
                <h4>Approach</h4>
                <p style="white-space: pre-wrap;">{{ original_attempt.approach_text }}</p>
                {% if original_attempt.code %}
                <h4>Code</h4>
                <pre style="background: #eee; padding: 10px; overflow-x: auto;">{{ original_attempt.code }}</pre>
                {% endif %}
            </div>
        </div>
        <div style="flex: 1;">
            <h3>This Attempt</h3>
            <div style="background: #f9f9f9; padding: 10px; border-radius: 4px;">
                <h4>Approach</h4>
                <p style="white-space: pre-wrap;">{{ attempt.approach_text }}</p>
                {% if attempt.code %}
                <h4>Code</h4>
                <pre style="background: #eee; padding: 10px; overflow-x: auto;">{{ attempt.code }}</pre>
                {% endif %}
            </div>
        </div>
    </div>

    <div style="margin-top: 20px; text-align: center;">
        <a href="/dashboard"><button>Back to Dashboard</button></a>
        <a href="/practice"><button style="background: #28a745;">Continue Practice</button></a>
    </div>
</div>
{% endblock %}